<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.0/bootstrap-table.min.css">
  <link rel="stylesheet" href="//rawgit.com/vitalets/x-editable/master/dist/bootstrap3-editable/css/bootstrap-editable.css">
</head>
<body>
<!-- Partial: Main Content Section -->
<div class="container">
  <h1>Bootstrap Table</h1>

  <p>A table with third-party integration extensions: Filter control, Sorting, and Data export.</p>

  <div id="toolbar">
    <select class="form-control">
      <option value="">Export Basic</option>
      <option value="all">Export All</option>
      <option value="selected">Export Selected</option>
    </select>
  </div>

  <!-- Laravel Dynamic Table for Properties -->
  <table class="table table-striped" id="propertiesTable" 
         data-toggle="table"
         data-search="true"
         data-filter-control="true"
         data-show-export="true"
         data-click-to-select="true"
         data-toolbar="#toolbar">
    <thead>
      <tr>
        <th data-field="state" data-checkbox="true"></th>
        <th data-field="property_number" data-sortable="true">Property Number</th>
        <th data-field="description" data-sortable="true" data-filter-control="input">Description</th>
        <th data-field="office" data-sortable="true" data-filter-control="input">Office</th>
        <th data-field="category" data-sortable="true" data-filter-control="select">Category</th>
        <th data-field="status" data-sortable="true" data-filter-control="select">Status</th>
        <th data-field="account" data-sortable="true" data-filter-control="select">Account</th>
        <th data-field="employee" data-sortable="true" data-filter-control="input">Employee</th>
        <th data-field="employee2" data-sortable="true" data-filter-control="input">Employee 2</th>
      </tr>
    </thead>
    <tbody>
      <!-- Blade Loop to Display Properties -->
      @foreach($properties as $property)
        <tr>
          <td><input type="checkbox" name="selected_ids[]" value="{{ $property->id }}"></td>
          <td>{{ $property->property_number }}</td>
          <td>{{ $property->description }}</td>
          <td>{{ $property->office->name }}</td>
          <td>{{ $property->category->name }}</td>
          <td>{{ $property->status->name }}</td>
          <td>{{ $property->account->name }}</td>
          <td>{{ $property->employee->name }}</td>
          <td>{{ $property->employee2->name }}</td>
        </tr>
      @endforeach
    </tbody>
  </table>

  <button id="exportButton" class="btn btn-primary" disabled>Export Selected</button>
</div>

<!-- External JS Libraries -->
<script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src='//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js'></script>
<script src='//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.0/bootstrap-table.js'></script>
<script src='//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/editable/bootstrap-table-editable.js'></script>
<script src='//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/export/bootstrap-table-export.js'></script>
<script src='//rawgit.com/hhurz/tableExport.jquery.plugin/master/tableExport.js'></script>
<script src='//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/filter-control/bootstrap-table-filter-control.js'></script>

<script>
  // Initializing the table with the export functionality
  var $table = $('#propertiesTable');
  $(function () {
    $('#toolbar').find('select').change(function () {
      $table.bootstrapTable('refreshOptions', {
        exportDataType: $(this).val()
      });
    });
  })

  // Highlight selected rows when clicked
  var trBoldBlue = $("table");
  $(trBoldBlue).on("click", "tr", function () {
    $(this).toggleClass("bold-blue");
  });
</script>
</body>
</html>
